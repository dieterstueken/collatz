<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
          }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
       src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        table, td, th {
            border: 1px solid black;
            text-align: right;
        }
        table {
            border-collapse: collapse;
            margin-left:auto;
            margin-right:auto;
        }
    </style>
    <script src="collatz.js"></script>
    <script src="collatz-tables.js"></script>
    <title>Zusammenhänge</title>
</head>
<body>

Die gängige Beschreibung der Collatz Sequenz lautet:

$$ n^+ =\begin{cases}
    {n/2} & {\text{wenn }}n\equiv 0{\pmod {2}}\\
    3n+1 & {\text{wenn }}n\equiv 1{\pmod {2}}.
\end{cases}$$

wenn man aufeinanderfolgenden Divisionen durch Zwei zu einem Schritt zusammenzieht,
so lässt sich die Definition vereinfachen.
Hierbei reicht es nur die ungeraden $n$ zu betrachten.
<p>Da $3n+1$ dann immer gerade ist, lässt sich schreiben:

$$ n^+ = \frac{(3n+1)}{2} / 2^L \quad \text{ mit } n\equiv 1{\pmod {2}}$$

Als Binärzahl betrachtet bedeutet dies, dass man einfach alle Nullen am Ende tilgt.

<p>
Als Beispiel die Collatz Folge für den Startwert $n=9$:

<table id="table1">
    <tr> <th>n</th><th>3n+1</th><th colspan="2" style="text-align:center;">binär</th><th>&nbsp;L</th> </tr>
</table>

<p>
Da nun $n$ ungerade sein muss, kann man mit $n = 2k+1$ substituieren und erhält damit:

$$ k^+ = ((3k+2) / 2^L - 1)/2$$

Binär betrachtet bedeutet die zunächst etwas komliziert aussehende Operation $(N/2^L-1)/2$ dass man hinten $L$ Nullen streicht und zusätzlich noch eine 1.
<p>
Als Beispiel wieder die Collatz Folge mit den Startwerten $n=9$ bzw. $k=4$:

<table id="table2">
    <tr> <th>n</th><th>&nbsp;k</th><th>3k+2</th><th colspan="2" style="text-align:center;">binär</th><th>&nbsp;L</th> </tr>
</table>

<p>
Die verminderten Collatz Folgen enden also immer auf $0$
und liefern zusätzlich eine Folge $L_i$ der jeweilgen Reduktionen.

<table id="table3">
<tr><th>k</th><th>k<sup>+</sup></th><th style="text-align:right;">L<sub>i</sub></th></tr>
</table>

<p>
Statt nun den Zerfall einer Zahl als Folge zu betrachten, kann man auch in die andere Richtung schauen,
also nach den Vorgängerelementen einer Zahl fragen.

Hierfür erscheint es aufschlussreich die Folge $L_i$ der Reduktionen rückwärts zu notieren:

<table id="table4">
<tr><th>k</th><th>k<sup>+</sup></th><th style="text-align:left;">L<sub>i</sub></th></tr>
</table>

Man erhält hierfür den Zusammenhang:

$$ 3k^- = 2^L(2k+1)-2$$

</body>
</html>
