<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
          }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
       src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        table, td, th {
            border: 1px solid black;
            text-align: right;
        }
        table {
            border-collapse: collapse;
        }
    </style>
    <script>
      window.onload = function () {
        var table = document.getElementById("table3");

        function row(k) {
          var row = table.insertRow();

          function cell(value) {
            var cell=row.insertCell()
            //var span =  document.createElement("span");
            //cell.appendChild(span);
            cell.textContent=value;
            return cell;
          }

          var kn = 3*k+2;
          var l=0;

          while(kn%2==0) {
            kn /= 2;
            ++l;
          }

          kn -= 1;
          kn /= 2;

          cell(2*k+1).style.textAlign = "right";
          cell(k).style.textAlign = "right";
          cell(kn).style.textAlign = "right";
          cell(l).style.textAlign = "right";
          cell("1.2.3").style.textAlign = "left";
        }

        for (var k = 0; k < 8; k++) {
          row(k);
        }
      };
    </script>
    <title>Zusammenhänge</title>
</head>
<body>

Die gängige Beschreibung der Collatz Sequenz lautet:

$$ n^+ =\begin{cases}
    {n/2} & {\text{wenn }}n\equiv 0{\pmod {2}}\\
    3n+1 & {\text{wenn }}n\equiv 1{\pmod {2}}.
\end{cases}$$

wenn man aufeinanderfolgenden Divisionen durch Zwei zu einem Schritt zusammenzieht,
so lässt sich die Definition vereinfachen.
Hierbei reicht es nur die ungeraden $n$ zu betrachten.
Da $3n+1$ dann immer gerade ist, lässt sich schreiben:

$$ n^+ = \frac{(3n+1)}{2} / 2^L \quad \text{ mit } n\equiv 1{\pmod {2}}$$

Als Binärzahl betrachtet bedeutet dies, dass man einfach alle Nullen am Ende tilgt.

<p>
Als Beispiel die Collatz Folge für den Startwert $n=9$:

<table>
    <tr> <th>n</th><th>3n+1</th><th colspan="2" style="text-align:center;">binär</th><th>L</th> </tr>
    <tr> <td>9</td><td>28</td><td>1001</td><td>111<del>00</del></td><td>1</td></tr>
    <tr> <td>7</td><td>22</td><td>111</td><td>1011<del>0</del></td><td>0</td></tr>
    <tr> <td>11</td><td>34</td><td>1011</td><td>10001<del>0</del></td><td>0</td></tr>
    <tr> <td>17</td><td>52</td><td>10001</td><td>1101<del>00</del></td><td>1</td></tr>
    <tr> <td>13</td><td>40</td><td>1101</td><td>101<del>000</del></td><td>2</td></tr>
    <tr> <td>5</td><td>16</td><td>101</td><td>1<del>0000</del></td><td>3</td></tr>
    <tr> <td>1</td><td>4</td><td>1</td><td>1<del>00</del></td><td>1</td></tr>
</table>

<p>
Da nun $n$ ungerade sei muss, kann man mit $n = 2k+1$ substituieren und erhält damit:

$$ k^+ = ((3k+2) / 2^L - 1)/2$$

Binär betrachtet bedeutet die zunächst etwas komliziert aussehende Operation $(N/2^L-1)/2$ dass man hinten alle Nullen streicht und zusätzlich noch eine 1.
<p>
Als Beispiel wieder die Collatz Folge für den Startwerten $n=9$ bzw. $k=4$:

<table>
    <tr> <th>n</th><th>k</th><th>3k+2</th><th colspan="2" style="text-align:center;">binär</th><th>L</th> </tr>
    <tr> <td>9</td><td>4</td><td>14</td><td>100</td><td>11<del>10</del></td><td>1</td></tr>
    <tr> <td>7</td><td>3</td><td>11</td><td>11</td><td>101<del>1</del></td><td>0</td></tr>
    <tr> <td>11</td><td>5</td><td>17</td><td>101</td><td>1000<del>1</del></td><td>0</td></tr>
    <tr> <td>17</td><td>8</td><td>26</td><td>1000</td><td>110<del>10</del></td><td>1</td></tr>
    <tr> <td>13</td><td>6</td><td>20</td><td>110</td><td>10<del>100</del></td><td>2</td></tr>
    <tr> <td>5</td><td>2</td><td>8</td><td>10</td><td><del>1000</del></td><td>3</td></tr>
    <tr> <td>1</td><td>0</td><td>2</td><td>0</td><td><del>10</del></td><td>1</td></tr>
</table>
<p>
Die verminderten Collatz Folgen enden also immer auf $0$
und liefern zusätzlich eine Folge $L_i$ der jeweilgen Reduktionen.

<table id="table3">
<tr><th>n</th><th>k</th><th>$k^-$</th><th>L</th><th>$L_i$</th></tr>
</table>
<p>
Statt den Zerfall einer Zahl als Folge zu betrachten, kann man auch in die andere Richtung schauen,
also nach den Vorgängerelementen einer Zahl fragen.
Man erhält hierfür den Zusammenhang:

$$ 3k^- = 2^L(2k+1)-2$$

</body>
</html>
